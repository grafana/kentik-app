{"version":3,"sources":["../../src/components/device_details.js"],"names":[],"mappings":"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","file":"device_details.js","sourcesContent":["import _ from 'lodash';\n\nexport class DeviceDetailsCtrl {\n\n\t/** @ngInject */\n  constructor($scope, $injector, $location, backendSrv, alertSrv) {\n    this.backendSrv = backendSrv;\n    this.alertSrv = alertSrv;\n    this.$location = $location;\n    this.device = {};\n    this.deviceDTO = {};\n    this.pageReady = false;\n    this.getDevice($location.search().device);\n  }\n\n  addIP() {\n    this.other_ips.push({ip: ''});\n  }\n\n  removeIP(index) {\n    this.other_ips.splice(index, 1);\n  }\n\n  getDevice(deviceId) {\n    var self = this;\n    this.backendSrv.get(\"/api/plugin-proxy/kentik-app/api/v1/device/\"+deviceId).then(function(resp) {\n      self.device = resp.device[0];\n      self.updateDeviceDTO();\n      self.pageReady = true;\n    });\n  }\n\n  updateDeviceDTO() {\n    var self = this;\n    this.deviceDTO = {\n      device_id: this.device.id,\n      device_name: this.device.device_name,\n      type: this.device.device_type,\n      device_description: this.device.device_description,\n      flow_type: this.device.device_flow_type,\n      flow_rate: parseInt(this.device.device_sample_rate),\n      other_ips: this.device.device_chf_interface,\n      minimize_snmp: this.device.minimize_snmp,\n      device_ip: this.device.device_snmp_ip,\n      snmp_community: this.device.device_snmp_community,\n    };\n    this.other_ips = [];\n    _.forEach(this.deviceDTO.other_ips.split(','), function(ip) {\n      self.other_ips.push({ip: ip});\n    });\n  }\n\n  update() {\n    var self = this;\n    var ips = [];\n    _.forEach(this.other_ips, function(ip) {\n      ips.push(ip.ip);\n    });\n    if (!this.deviceDTO.device_ip) {\n      delete this.deviceDTO.device_ip;\n    }\n    if (!this.deviceDTO.snmp_community) {\n      delete this.deviceDTO.snmp_community;\n    }\n\n    this.deviceDTO.other_ips = ips.join();\n    this.backendSrv.post(\"/api/plugin-proxy/kentik-app/api/v1/device/\"+this.deviceDTO.device_id, this.deviceDTO).then((resp) => {\n      if ('err' in resp) {\n        this.alertSrv.set(\"Device Update failed.\", resp.err, 'error');\n      } else {\n        return self.getDevice(self.deviceDTO.device_id);\n      }\n    });\n  }\n}\n\nDeviceDetailsCtrl.templateUrl = 'components/device_details.html';\n"]}